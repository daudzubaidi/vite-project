# name: update-version

# on:
#   pull_request:
#     types: [opened, synchronize]
#     branches:
#       - main

# jobs:
#   update-version:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v2
#         with:
#           ref: ${{ github.head_ref }}
#       - name: Setup Node.js
#         uses: actions/setup-node@v2
#         with:
#           node-version: '14'
#       - name: Update package.json version
#         run: |
#           VERSION=$(jq -r .version package.json)
#           MAJOR_MINOR_VERSION="${VERSION%.*}"
#           PATCH_VERSION="${VERSION##*.}"
#           NEW_PATCH_VERSION=$(($PATCH_VERSION+1))
#           NEW_VERSION="$MAJOR_MINOR_VERSION.$NEW_PATCH_VERSION"
#           jq ".version=\"$NEW_VERSION\"" package.json > tmp.json && mv tmp.json package.json
#       - name: Commit and push
#         run: |
#           git config --local user.email "daud.java@gmail.com"
#           git config --local user.name "daudzubaidi"
#           git diff --quiet && git diff --staged --quiet || (git commit -am "Bump version to $NEW_VERSION" && git push)